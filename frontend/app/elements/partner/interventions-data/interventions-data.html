<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../common/etools-ajax/etools-ajax.html">

<dom-module id="interventions-data">

  <template>
    <etools-ajax
          auto
          id="ajax"
          url="[[url]]"
          handle-as="json"
          on-response="handleResponse"
          debounce-duration="300">
    </etools-ajax>
  </template>

</dom-module>

<script>
(function() {
    // jscs:disable
  'use strict';
  Polymer({
    is: 'interventions-data',
    observers: ['_updateInterventions(interventions.*)'],
    properties: {
      interventions: {
        type: Array,
        notify: true,
        value: []
      },
      url: {
        type: String,
        value: null
      }    
    },
    ready: function(){
        this.$.ajax.endpoint = {ep: 'interventions'};
    },
   
    handleResponse: function(rsp) {
      this.interventions = rsp.detail;
    },
    _updateInterventions: function() {
      console.log('Interventions updated woo');
    }
  });
})();

</script>